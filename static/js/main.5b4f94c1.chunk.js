(this.webpackJsonpgame2048=this.webpackJsonpgame2048||[]).push([[0],{13:function(e,t,a){e.exports=a(26)},18:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(5),o=a.n(l),c=(a(18),a(4)),s=a(3),u=(a(24),[{bg:"#eee4da",color:"#776e65",size:34},{bg:"#ede0c8",color:"#776e65",size:34},{bg:"#f2b179",color:"#f9f6f2",size:34},{bg:"#f59563",color:"#f9f6f2",size:34},{bg:"#f67c5f",color:"#f9f6f2",size:34},{bg:"#f65e3b",color:"#f9f6f2",size:34},{bg:"#edcf72",color:"#f9f6f2",size:24},{bg:"#edcc61",color:"#f9f6f2",size:24},{bg:"#edc850",color:"#f9f6f2",size:24},{bg:"#edc53f",color:"#f9f6f2",size:14},{bg:"#ecc400",color:"#f9f6f2",size:14}]),f=60,i=10,p=null,h=Object(s.b)((function(e){return{store:e}}))((function(e){var t=e.store,a=e.dispatch,l=Object(r.useState)(!0),o=Object(c.a)(l,2),s=o[0],h=o[1],m=Object(r.useState)("\u51c6\u5907\u597d\u4e86\u5417\uff1f"),b=Object(c.a)(m,2),d=b[0],g=b[1],v=Object(r.useState)([[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]]),y=Object(c.a)(v,2),O=y[0],S=y[1],E=Object(r.useState)([]),N=Object(c.a)(E,2),j=N[0],w=N[1];function k(){return Math.random()>.9?1:0}return Object(r.useEffect)((function(){for(var e=[],t=0;t<O.length;t++)for(var r=0;r<O[t].length;r++)null!==O[t][r]&&e.push(Object.assign({},{x:r,y:t,level:O[t][r]},u[O[t][r]]));w(e),p=JSON.parse(JSON.stringify(O));var n=!0;O.forEach((function(e){e.forEach((function(e){null===e&&(n=!1)}))}));e:for(var l=0;l<4;l++)for(var o=0;o<4;o++)if(null===O[l][o]||o<3&&O[l][o]===O[l][o+1]||l<3&&O[l][o]===O[l+1][o]){n=!1;break e}n&&(g("Game over!"),h(!0),a({type:"updateState",payload:{gameStarted:!1}}))}),[a,O]),Object(r.useEffect)((function(){t.stepDirection&&function(){var e=[],r=0;switch(t.stepDirection){case"TOP":for(;e.length<4;)e.push([[],[],[],[]]);for(var n=function(t){for(var a=[],n=0;n<4;n++)null!==p[n][t]&&a.push(p[n][t]);if(a.length)for(var l=1;l<=a.length&&null!==a[l];l++)if(a[l]===a[l-1]){a[l-1]=a[l-1]+1,r+=Math.pow(2,a[l]+2);for(var o=l;o<a.length;o++)a[o+1]||0===a[o+1]?a[o]=a[o+1]:a[o]=null}for(;a.length<4;)a.push(null);a.forEach((function(a,r){e[r][t]=a}))},l=0;l<4;l++)n(l);break;case"LEFT":p.forEach((function(t){var a=[];if(t.forEach((function(e){null!==e&&a.push(e)})),a.length)for(var n=1;n<=a.length&&null!==a[n];n++)if(a[n]===a[n-1]){a[n-1]=a[n-1]+1,r+=Math.pow(2,a[n]+2);for(var l=n;l<a.length;l++)a[l+1]||0===a[l+1]?a[l]=a[l+1]:a[l]=null}for(;a.length<4;)a.push(null);e.push(a)}));break;case"RIGHT":p.forEach((function(t){var a=[];if(t.forEach((function(e){null!==e&&a.push(e)})),a.length>1)for(var n=a.length-2;n>=0&&null!==a[n];n--)if(a[n]===a[n+1]){a[n+1]=a[n+1]+1,r+=Math.pow(2,a[n]+2);for(var l=n;l>=0;l--)a[l-1]||0===a[l-1]?a[l]=a[l-1]:a[l]=null}for(;a.length<4;)a.unshift(null);e.push(a)}));break;case"BOTTOM":for(;e.length<4;)e.push([[],[],[],[]]);for(var o=function(t){for(var a=[],n=0;n<4;n++)null!==p[n][t]&&a.push(p[n][t]);if(a.length>1)for(var l=a.length-2;l>=0&&null!==a[l];l--)if(a[l]===a[l+1]){a[l+1]=a[l+1]+1,r+=Math.pow(2,a[l]+2);for(var o=l;o>=0;o--)a[o-1]||0===a[o-1]?a[o]=a[o-1]:a[o]=null}for(;a.length<4;)a.unshift(null);a.forEach((function(a,r){e[r][t]=a}))},c=0;c<4;c++)o(c)}if(JSON.stringify(p)!==JSON.stringify(e)){a({type:"updateStepNum"});for(var s=[],u=0;u<4;u++)for(var f=0;f<4;f++)null===e[u][f]&&s.push({x:u,y:f});var i=Math.floor(Math.random()*s.length),h=k(),m=s[i],b=m.x,d=m.y;e[b][d]=h,S(e)}a({type:"updateStepDirection",payload:""}),a({type:"updateScore",payload:r})}()}),[a,t.stepDirection]),n.a.createElement("div",{className:"chessboard"},new Array(16).fill("").map((function(e,t){return n.a.createElement("div",{key:t,className:"cell",style:{top:Math.floor(t/4)*(f+i)+i,left:t%4*(f+i)+i}})})),j.map((function(e,t){return n.a.createElement("div",{key:t,className:"cell",style:{top:e.y*(f+i)+i,left:e.x%4*(f+i)+i,background:e.bg,fontSize:e.size,color:e.color}},Math.pow(2,e.level+1))})),s?n.a.createElement("div",{className:"game-over"},n.a.createElement("p",{className:"message"},d),n.a.createElement("div",{className:"play-btn",onClick:function(){for(var e=k(),t=k(),r=Math.floor(4*Math.random()),n=Math.floor(4*Math.random()),l=r,o=n;l===r&&o===n;)l=Math.floor(4*Math.random()),o=Math.floor(4*Math.random());var c=[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]];c[n][r]=e,c[o][l]=t,S(c),h(!1),a({type:"updateState",payload:{gameStarted:!0,stepNum:0,score:0}})}},"\u5f00\u59cb\u6e38\u620f")):null)}));a(25);var m=Object(s.b)((function(e){return{store:e}}))((function(e){var t=e.store,a=e.dispatch;return Object(r.useEffect)((function(){var e=localStorage.getItem("bestScore");e&&a({type:"updateBestScore",payload:e})}),[a]),n.a.createElement("div",{className:"app",tabIndex:"0",onKeyUp:function(e){if(t.gameStarted){var r=null;switch(e.keyCode){case 87:case 38:r="TOP";break;case 68:case 39:r="RIGHT";break;case 83:case 40:r="BOTTOM";break;case 65:case 37:r="LEFT"}a({type:"updateStepDirection",payload:r})}}},n.a.createElement("div",{className:"wrap"},n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"title"},"2048"),n.a.createElement("div",{className:"info"},n.a.createElement("div",{className:"block"},n.a.createElement("p",{className:"name"},"\u5f97\u5206"),n.a.createElement("p",{className:"score"},t.score)),n.a.createElement("div",{className:"block"},n.a.createElement("p",{className:"name"},"\u6700\u9ad8\u5206"),n.a.createElement("p",{className:"score"},t.bestScore)))),n.a.createElement(h,null)))})),b=a(6),d=a(12);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={gameStarted:!1,stepNum:0,stepDirection:"",score:0,bestScore:0},O=Object(b.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"updateState":return v({},e,{},t.payload);case"updateStepNum":return v({},e,{stepNum:e.stepNum+1});case"updateStepDirection":return v({},e,{stepDirection:t.payload});case"updateScore":var a=e.score+t.payload;return a>e.bestScore&&localStorage.setItem("bestScore",a),v({},e,{score:a,bestScore:a>e.bestScore?a:e.bestScore});case"updateBestScore":return v({},e,{bestScore:t.payload});default:return e}}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(s.a,{store:O},n.a.createElement(m,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[13,1,2]]]);
//# sourceMappingURL=main.5b4f94c1.chunk.js.map